---
layout: post
title: "[Smilegate Project]NoSQL vs RDBMS"
date: 2020-01-07
excerpt: "어떤 DB를 사용할지 고민중. NoSQL vs RDBMS 의 특징과 차이점 알아보기"
tags: [Project,Smilegate,서버개발캠프]
feature: http://i.imgur.com/Ds6S7lJ.png
project: true
smilegate : true
comments: true
---

## [개요]
스마일게이트 서버개발캠프에서 프로젝트를 기획하는 도중 DB를 어떤 것을 사용 할 것인가에 대한 선택사항에 마주하게 되었다. MySQL, Oracle 같은 RDBMS 를 사용 할 것인가? 아니면 MongoDB 와 같은 NoSQL 을 사용할 것인가? Node.js 를 사용하는 사람들은 MongoDB(NoSQL)를 많이 사용한다고 하고, 단점도 있다고 하고.. 각각의 특징과 장단점에 대해 알아보고 우리의 sns 프로젝트에 적용할 적합한 db 를 선택해 보고자 한다.
> ** 우리는 알림 db 에는 nosql(mongodb)을 적용하고, 유저 db에는 mysql 을 적용하였다. **

## RDBMS(SQL) - 관계형 데이터베이스
SQL 은 '구조화 된 쿼리 언어(Structured Query Language)'의 약자이다. 그러므로 데이터베이스 자체를 나타내는 것이 아니라, 특정 유형의 데이터베이스와 상호 작용하는 데 사용 하는 쿼리 언어이다. (여기서는 SQL을 관계형 데이터베이스 라는 의미로 사용한다.)<br><br>
SQL 을 사용하면 관계형 데이터베이스 관리 시스템(RDBMS)에서 데이터를 저장, 수정, 삭제, 검색 할 수 있다.<br>
이러한 관계형 데이터베이스에는 두 가지 주요 특징이 있다.<br>
* 데이터는 정해진(엄격한) 데이터 스키마 (=structure)를 따라 데이터베이스 테이블에 저장된다.
* 데이터는 관계를 통햏서 연결된 여러개의 테이블에 분산된다. <Br><br>

### 특징
* 수직적 확장만 제공 => 성장 한계에 직면한다.
* 상대적으로 덜 유연한다. 데이터 스키마는 사전에 계획되고 알려져야 하며 나중에 수정 하는 것이 번거롭고 불가능 할 수 있다
* 관계를 맺고 있기 때문에, JOIN 문이 많은 매우 복잡한 쿼리가 만들어 질 수 있다. 
* 관계를 맺고 있는 데이터가 자주 변경(수정)되는 애플리케이션 일 경우 (NoSQL 은 여러 컬렉션을 모두 수정해 주어야 한다.)
* 변경될 여지가 없고, 명확한 스키마가 사용자와 데이터에게 중요한 경우 사용한다
> 수직적 확장 : 단순히 데이터베이스 서버의 성능을 향상시키는 것(예를 들어, CPU 를 업그레이드 하는 방식)
> 수평적 확장 : 더 많은 서버가 추가되고 데이터베이스가 전체적으로 분산됨을 의미. 따라서 하나의 데이터베이스에서 작동하지만 여러 호스트에서 작동 

## NoSQL
NOSQL 은 기본적으로 SQL(관계형 데이터베이스)와 반대되는 접근방식을 따르기 때문에 지어진 이름이다.
* 스키마 없음
* 관계 없음<br>
NOSQL 세상에서는 레코드를 문서라고 부른다.<br><bR>
이것은 단순히 이름만 다른 것이 아니라, 핵심적인 차이가 있다. SQL 구조에서는 정해진 스키마를 따르지 않는다면 데이터를 추가 할 수 없지만, NoSQL 에서는 다른 구조의 데이터를 같은 컬렉션(=SQL에서의 테이블)에 추가할 수 있다.<br><br>
문서는 JSON 데이터와 비슷한 형태를 가지고 있다. 이런 방식은 데이터가 중복되기 때문에 불안정한 측면이 있다. 특정 데이터를 같이 사용하는 모든 컬렉션에서, 똑같은 데이터 업데이트를 수행되도록 해야 한다.<br>
그럼에도 불구하고, 이러한 방식의 커다란 장점은 복잡하고(어떤 순간에는 느린) 조인을 사용할 필요가 없다는 것이다. 필요한 모든 데이터가 이미 하나의 컬렉션안에 저장되어 있기 때문이다.<br><Br>
특히 자주 변경되지 않는 데이터 일때 더 큰 장점이 있다. 
### 특징
* 스키마가 없기 때문에, 훨씬 더 유연하다. 즉, 언제든지 저장된 데이터를 조정하고 새로운 "필드"를 추가 할 수 있다. 
* 데이터는 애플리케이션이 필요로 하는 형식으로 저장된다. 이렇게 함으로써 데이터를 읽어오는 속도가 빨라진다.
* 수직 및 수평 확장이 가능하므로 데이터베이스가 애플리케이션에서 발생시키는 모든 읽기 / 쓰기 요청을 처리 할 수 있다. 
* 유연성 때문에, 데이터 구조 결정을 하지 못하고 미루게 될 수 있다.
* 데이터 중복은 여러 컬렉션과 문서가 여러개의 레코드가 변경된 경우 업데이트를 해야 한다.
* 데이터가 여러 컬렉션에 중복되어 있기 때문에, 수정을 해야 하는 경우 모든 컬렉션에서 수행해야 함을 의미한다. 
* 정확한 데이터 구조를 알 수 없거나 변경 / 확장 될 수 있는 경우에 사용한다. 
* 읽기 처리를 자주하지만, 데이터를 자주 변경 하지 않는 경우(즉, 한번의 변경으로 수십 개의 문서를 업데이트 할 필요가 없는 경우)
* 데이터베이스를 수평으로 확장해야 하는 경우 (즉, 막대한 양의 데이터를 다뤄야 하는 경우)

## 프로젝트에 적용한 기술과 그 이유
* **알림 db** 의 경우 테이블의 형태가 간단하고, 조인연산이 없기 때문에 빠른 읽기 연산이 가능한 nosql(mongodb)을 사용하여 구현하였다.
* **게시물(post) db** 의 경우 SNS 특성상 쓰기 연산보다는 읽기 연산이 현저히 많다는 특징을 고려하여, 빠른 읽기 연산이 가능한 nosql(mongodb)을 사용하여 구현하였다.
* **댓글 db** 의 경우 초반에는 nosql 을 이용하려고 하였으나, 유저 db 와 post db 와 관계가 맺어져있고 조인연산이 빈번히 일어나는 특징을 고려하여 mysql 로 구현하였다.
  
